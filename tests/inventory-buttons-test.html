<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Test de Botones - M√≥dulo de Inventarios</title>
        <style>
            body {
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                max-width: 1400px;
                margin: 20px auto;
                padding: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            }
            .container {
                background: white;
                border-radius: 12px;
                padding: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }
            h1 {
                color: #333;
                text-align: center;
                margin-bottom: 10px;
            }
            .subtitle {
                text-align: center;
                color: #666;
                margin-bottom: 30px;
            }
            .test-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }
            .test-card {
                border: 2px solid #e0e0e0;
                border-radius: 8px;
                padding: 20px;
                background: #fafafa;
                transition: all 0.3s ease;
            }
            .test-card:hover {
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                transform: translateY(-2px);
            }
            .test-card.success {
                border-color: #4caf50;
                background: #f1f8e9;
            }
            .test-card.error {
                border-color: #f44336;
                background: #ffebee;
            }
            .test-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
            }
            .test-title {
                font-weight: bold;
                color: #333;
                font-size: 16px;
            }
            .test-status {
                font-size: 24px;
            }
            .test-description {
                color: #666;
                font-size: 14px;
                margin-bottom: 10px;
            }
            .test-function {
                background: #333;
                color: #0f0;
                padding: 8px 12px;
                border-radius: 4px;
                font-family: "Courier New", monospace;
                font-size: 13px;
                margin-top: 10px;
            }
            .summary {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 25px;
                border-radius: 12px;
                margin-bottom: 30px;
                text-align: center;
            }
            .summary h2 {
                margin: 0 0 20px 0;
            }
            .stats {
                display: flex;
                justify-content: center;
                gap: 40px;
                flex-wrap: wrap;
            }
            .stat {
                text-align: center;
            }
            .stat-value {
                font-size: 48px;
                font-weight: bold;
                display: block;
            }
            .stat-label {
                font-size: 14px;
                opacity: 0.9;
            }
            button {
                background: #667eea;
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 16px;
                font-weight: bold;
                display: block;
                margin: 0 auto 20px;
                transition: all 0.3s ease;
            }
            button:hover {
                background: #764ba2;
                transform: scale(1.05);
            }
            .loading {
                text-align: center;
                padding: 40px;
                color: #666;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üîò Test de Botones del M√≥dulo de Inventarios</h1>
            <p class="subtitle">
                Verificaci√≥n exhaustiva de todos los botones y funciones onclick
            </p>

            <button onclick="runButtonTests()">
                ‚ñ∂Ô∏è Ejecutar Verificaci√≥n de Botones
            </button>

            <div id="summary" style="display: none" class="summary">
                <h2>üìä Resumen de Verificaci√≥n</h2>
                <div class="stats">
                    <div class="stat">
                        <span class="stat-value" id="totalButtons">0</span>
                        <span class="stat-label">Botones Totales</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="functionalButtons">0</span>
                        <span class="stat-label">‚úÖ Funcionales</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="brokenButtons">0</span>
                        <span class="stat-label">‚ùå Con Problemas</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="successRate">0%</span>
                        <span class="stat-label">Tasa de √âxito</span>
                    </div>
                </div>
            </div>

            <div id="results" class="test-grid">
                <div class="loading">
                    ‚è≥ Haz clic en "Ejecutar Verificaci√≥n" para comenzar...
                </div>
            </div>
        </div>

        <script>
            // Definir todas las funciones que deben existir
            const buttonsToTest = [
                {
                    name: "‚ûï Nuevo Producto",
                    description:
                        "Bot√≥n principal para agregar nuevos productos",
                    functionName: "openInventoryModal",
                    params: "'addProduct'",
                    category: "Acciones Principales",
                },
                {
                    name: "üìä Ajustar Stock",
                    description:
                        "Bot√≥n principal para ajustar stock de productos",
                    functionName: "openInventoryModal",
                    params: "'adjustStock'",
                    category: "Acciones Principales",
                },
                {
                    name: "üìà Reportes",
                    description: "Bot√≥n principal para mostrar reportes",
                    functionName: "showInventoryReport",
                    params: "",
                    category: "Acciones Principales",
                },
                {
                    name: "üìä Tab Dashboard",
                    description: "Cambiar a pesta√±a de Dashboard",
                    functionName: "switchInventoryTab",
                    params: "'dashboard'",
                    category: "Navegaci√≥n (Tabs)",
                },
                {
                    name: "üì¶ Tab Productos",
                    description: "Cambiar a pesta√±a de Productos",
                    functionName: "switchInventoryTab",
                    params: "'products'",
                    category: "Navegaci√≥n (Tabs)",
                },
                {
                    name: "üîÑ Tab Movimientos",
                    description: "Cambiar a pesta√±a de Movimientos",
                    functionName: "switchInventoryTab",
                    params: "'movements'",
                    category: "Navegaci√≥n (Tabs)",
                },
                {
                    name: "‚ö†Ô∏è Tab Alertas",
                    description: "Cambiar a pesta√±a de Alertas",
                    functionName: "switchInventoryTab",
                    params: "'alerts'",
                    category: "Navegaci√≥n (Tabs)",
                },
                {
                    name: "‚öôÔ∏è Tab Configuraci√≥n",
                    description: "Cambiar a pesta√±a de Configuraci√≥n",
                    functionName: "switchInventoryTab",
                    params: "'settings'",
                    category: "Navegaci√≥n (Tabs)",
                },
                {
                    name: "‚úèÔ∏è Editar Producto",
                    description: "Bot√≥n en tabla para editar producto",
                    functionName: "editProduct",
                    params: "'test-id'",
                    category: "Acciones de Tabla",
                },
                {
                    name: "üóëÔ∏è Eliminar Producto",
                    description: "Bot√≥n en tabla para eliminar producto",
                    functionName: "deleteProduct",
                    params: "'test-id'",
                    category: "Acciones de Tabla",
                },
                {
                    name: "üìä Ajuste R√°pido",
                    description:
                        "Bot√≥n en tabla para ajustar stock r√°pidamente",
                    functionName: "quickAdjustStock",
                    params: "'test-id'",
                    category: "Acciones de Tabla",
                },
                {
                    name: "üì• Exportar Movimientos",
                    description: "Exportar tabla de movimientos",
                    functionName: "exportMovements",
                    params: "",
                    category: "Exportaci√≥n",
                },
                {
                    name: "üíæ Guardar Configuraci√≥n",
                    description: "Guardar cambios en configuraci√≥n",
                    functionName: "saveInventorySettings",
                    params: "",
                    category: "Configuraci√≥n",
                },
                {
                    name: "üîÑ Resetear Configuraci√≥n",
                    description: "Restablecer configuraci√≥n por defecto",
                    functionName: "resetInventorySettings",
                    params: "",
                    category: "Configuraci√≥n",
                },
                {
                    name: "‚ûï Nueva Categor√≠a",
                    description: "Agregar nueva categor√≠a de productos",
                    functionName: "addNewCategory",
                    params: "",
                    category: "Configuraci√≥n",
                },
                {
                    name: "üóëÔ∏è Eliminar Categor√≠a",
                    description: "Eliminar categor√≠a de productos",
                    functionName: "deleteCategory",
                    params: "'test-id'",
                    category: "Configuraci√≥n",
                },
                {
                    name: "üíæ Descargar Backup",
                    description: "Crear y descargar copia de seguridad",
                    functionName: "downloadInventoryBackup",
                    params: "",
                    category: "Backup",
                },
                {
                    name: "üìÇ Restaurar Backup",
                    description: "Restaurar desde copia de seguridad",
                    functionName: "restoreInventoryBackup",
                    params: "event",
                    category: "Backup",
                },
                {
                    name: "üìÑ Exportar CSV",
                    description: "Exportar inventario a CSV",
                    functionName: "exportInventoryToCSV",
                    params: "",
                    category: "Exportaci√≥n",
                },
                {
                    name: "üìÑ Exportar JSON",
                    description: "Exportar inventario a JSON",
                    functionName: "exportInventoryToJSON",
                    params: "",
                    category: "Exportaci√≥n",
                },
                {
                    name: "üìÑ Exportar Excel",
                    description: "Exportar inventario a Excel",
                    functionName: "exportInventoryToExcel",
                    params: "",
                    category: "Exportaci√≥n",
                },
                {
                    name: "√ó Cerrar Modal Producto",
                    description: "Cerrar modal de agregar/editar producto",
                    functionName: "closeInventoryModal",
                    params: "'addProduct'",
                    category: "Modales",
                },
                {
                    name: "√ó Cerrar Modal Ajuste",
                    description: "Cerrar modal de ajustar stock",
                    functionName: "closeInventoryModal",
                    params: "'adjustStock'",
                    category: "Modales",
                },
                {
                    name: "√ó Cerrar Modal Reporte",
                    description: "Cerrar modal de reportes",
                    functionName: "closeInventoryModal",
                    params: "'report'",
                    category: "Modales",
                },
                {
                    name: "üñ®Ô∏è Imprimir Reporte",
                    description: "Imprimir reporte de inventario",
                    functionName: "printInventoryReport",
                    params: "",
                    category: "Reportes",
                },
                {
                    name: "üíæ Descargar Reporte",
                    description: "Descargar reporte de inventario",
                    functionName: "downloadInventoryReport",
                    params: "",
                    category: "Reportes",
                },
                {
                    name: "üîç Filtrar Productos (Categor√≠a)",
                    description: "Filtrar productos por categor√≠a",
                    functionName: "filterInventoryProducts",
                    params: "",
                    category: "Filtros",
                },
                {
                    name: "üîç Filtrar Productos (Estado)",
                    description: "Filtrar productos por estado",
                    functionName: "filterInventoryProducts",
                    params: "",
                    category: "Filtros",
                },
                {
                    name: "üîç Filtrar Movimientos",
                    description: "Filtrar movimientos de inventario",
                    functionName: "filterMovements",
                    params: "",
                    category: "Filtros",
                },
            ];

            function runButtonTests() {
                const resultsDiv = document.getElementById("results");
                const summaryDiv = document.getElementById("summary");

                resultsDiv.innerHTML = "";
                summaryDiv.style.display = "block";

                let functional = 0;
                let broken = 0;

                // Agrupar por categor√≠a
                const byCategory = {};
                buttonsToTest.forEach((btn) => {
                    if (!byCategory[btn.category]) {
                        byCategory[btn.category] = [];
                    }
                    byCategory[btn.category].push(btn);
                });

                // Verificar cada bot√≥n
                Object.keys(byCategory).forEach((category) => {
                    const categoryHeader = document.createElement("div");
                    categoryHeader.style.gridColumn = "1 / -1";
                    categoryHeader.innerHTML = `<h3 style="color: #667eea; margin-top: 20px; border-bottom: 2px solid #667eea; padding-bottom: 10px;">${category}</h3>`;
                    resultsDiv.appendChild(categoryHeader);

                    byCategory[category].forEach((button) => {
                        const card = document.createElement("div");
                        card.className = "test-card";

                        // Verificar si la funci√≥n existe
                        const functionExists =
                            typeof window[button.functionName] === "function";

                        if (functionExists) {
                            functional++;
                            card.classList.add("success");
                        } else {
                            broken++;
                            card.classList.add("error");
                        }

                        card.innerHTML = `
                        <div class="test-header">
                            <span class="test-title">${button.name}</span>
                            <span class="test-status">${
                                functionExists ? "‚úÖ" : "‚ùå"
                            }</span>
                        </div>
                        <div class="test-description">${
                            button.description
                        }</div>
                        <div class="test-function">${button.functionName}(${
                            button.params
                        })</div>
                    `;

                        resultsDiv.appendChild(card);
                    });
                });

                // Actualizar resumen
                const total = buttonsToTest.length;
                const successRate = ((functional / total) * 100).toFixed(1);

                document.getElementById("totalButtons").textContent = total;
                document.getElementById("functionalButtons").textContent =
                    functional;
                document.getElementById("brokenButtons").textContent = broken;
                document.getElementById("successRate").textContent =
                    successRate + "%";

                // Cambiar color seg√∫n resultado
                if (broken === 0) {
                    summaryDiv.style.background =
                        "linear-gradient(135deg, #11998e 0%, #38ef7d 100%)";
                } else if (broken > total / 2) {
                    summaryDiv.style.background =
                        "linear-gradient(135deg, #eb3349 0%, #f45c43 100%)";
                }
            }

            // Auto-ejecutar despu√©s de cargar el m√≥dulo
            window.addEventListener("load", () => {
                // Esperar un poco para que los scripts se carguen
                setTimeout(() => {
                    console.log(
                        "üîç Verificando disponibilidad de funciones del m√≥dulo de inventarios..."
                    );
                    console.log(
                        "Funciones disponibles:",
                        Object.keys(window).filter(
                            (k) =>
                                k.includes("inventory") ||
                                k.includes("Inventory") ||
                                k.includes("export") ||
                                k.includes("filter")
                        )
                    );
                }, 1000);
            });
        </script>
    </body>
</html>
